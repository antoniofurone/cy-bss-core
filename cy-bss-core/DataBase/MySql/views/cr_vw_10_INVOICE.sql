drop view BSSV_BILLABLE_COST;

create view BSSV_BILLABLE_COST
(
ID,PURCHASE_ID,INVOICE_ID,
COMPANY_ID,COMPANY_CODE,COMPANY_NAME,
PRODUCT_ID,PRODUCT_NAME,
SUPPLIER_ID,SUPPLIER_CODE,SUPPLIER_NAME,
PERSON_ID,PERSON_CODE,PERSON_FIRST_NAME,PERSON_SECOND_NAME,
COMPONENT_ID,COMPONENT_CODE,COMPONENT_NAME,
COMPONENT_TYPE_CODE,COMPONENT_TYPE_NAME,
QTY_UM_ID,QTY_UM_SIMBOL,QTY,
CURRENCY_ID,CURRENCY_CODE,CURRENCY_NAME,
PRICE, AMOUNT,VAT,VAT_AMOUNT,TOT_AMOUNT,
DATE,DATE_START,DATE_END,
TYPE,BILLED,UPDATE_DATE
)
as
select
	a.BIC_N_BILLABLE_ID,
	a.PUR_N_PURCHASE_ID,
	a.PIN_N_INVOICE_ID,
	b.COM_N_COMPANY_ID,b.COM_S_CODE,b.COM_S_NAME,
	c.PRO_N_PRODUCT_ID,c.PRO_S_NAME,
	d.COM_N_COMPANY_ID,d.COM_S_CODE,d.COM_S_NAME,
	e.PER_N_PERSON_ID,e.PER_S_CODE, e.PER_S_FIRST_NAME, e.PER_S_SECOND_NAME,
	h.PRC_N_PRICE_COMPONENT_ID,h.PRC_S_CODE,h.PRC_S_NAME,i.PRT_S_CODE,i.PRT_S_NAME,
	f.MES_N_METRIC_SCALE_ID, f.MES_S_SIMBOL, a.BIC_N_QUANTITY,
	g.CUR_N_CURRENCY_ID,g.CUR_S_CODE,g.CUR_S_NAME,
	a.BIC_N_PRICE,a.BIC_N_AMOUNT,a.BIC_N_VAT,a.BIC_N_VAT_AMOUNT,a.BIC_N_TOT_AMOUNT,
	a.BIC_D_DATE,a.BIC_D_DATE_START,a.BIC_D_DATE_END,
	a.BIC_C_TYPE,a.BIC_C_BILLED,a.BIC_D_UPDATE_DATE
from BSST_BIC_BILLABLE_COST a
join BSST_COM_COMPANY b on b.COM_N_COMPANY_ID=a.MNC_N_COMPANY_ID
join BSST_PRO_PRODUCT c on c.PRO_N_PRODUCT_ID=a.PRO_N_PRODUCT_ID
left join BSST_COM_COMPANY d on d.COM_N_COMPANY_ID=a.COM_N_COMPANY_ID
left join BSST_PER_PERSON e on e.PER_N_PERSON_ID=a.PER_N_PERSON_ID
left join BSST_MES_METRIC_SCALE f on f.MES_N_METRIC_SCALE_ID=a.MES_N_METRIC_SCALE_ID
join BSST_CUR_CURRENCY g on g.CUR_N_CURRENCY_ID=a.CUR_N_CURRENCY_ID
join BSST_PRC_PRICE_COMPONENT h on h.PRC_N_PRICE_COMPONENT_ID=a.PRC_N_PRICE_COMPONENT_ID
join BSST_PRT_PRICE_TYPE i on i.PRT_N_PRICE_TYPE_ID=h.PRT_N_PRICE_TYPE_ID;


drop view BSSV_PASSIVE_INVOICE;

create view BSSV_PASSIVE_INVOICE
(
ID,DATE,YEAR,NUMBER,
COMPANY_ID,COMPANY_CODE,COMPANY_NAME,
SUPPLIER_ID,SUPPLIER_CODE,SUPPLIER_NAME,
PERSON_ID,PERSON_CODE,PERSON_FIRST_NAME,PERSON_SECOND_NAME,
CURRENCY_ID,CURRENCY_CODE,CURRENCY_NAME,
AMOUNT,VAT_AMOUNT,TOT_AMOUNT,
NOTE,CANCELLED,STRING_NUMBER
)
as
select
	a.PIN_N_INVOICE_ID,a.PIN_D_DATE,a.PIN_N_YEAR,a.PIN_N_NUMBER,
	b.COM_N_COMPANY_ID,b.COM_S_CODE,b.COM_S_NAME,
	d.COM_N_COMPANY_ID,d.COM_S_CODE,d.COM_S_NAME,
	e.PER_N_PERSON_ID,e.PER_S_CODE, e.PER_S_FIRST_NAME, e.PER_S_SECOND_NAME,
	g.CUR_N_CURRENCY_ID,g.CUR_S_CODE,g.CUR_S_NAME,
	a.PIN_N_AMOUNT,a.PIN_N_VAT_AMOUNT,a.PIN_N_TOT_AMOUNT,
	a.PIN_S_NOTE,a.PIN_C_CANCELLED,a.PIN_S_NUMBER
from BSST_PIN_PASSIVE_INVOICE a
join BSST_COM_COMPANY b on b.COM_N_COMPANY_ID=a.MNC_N_COMPANY_ID
left join BSST_COM_COMPANY d on d.COM_N_COMPANY_ID=a.COM_N_COMPANY_ID
left join BSST_PER_PERSON e on e.PER_N_PERSON_ID=a.PER_N_PERSON_ID
join BSST_CUR_CURRENCY g on g.CUR_N_CURRENCY_ID=a.CUR_N_CURRENCY_ID;
